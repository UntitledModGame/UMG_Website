"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6385],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=p(n),d=r,h=m["".concat(s,".").concat(d)]||m[d]||c[d]||i;return n?a.createElement(h,o(o({ref:t},u),{},{components:n})):a.createElement(h,o({ref:t},u))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1635:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={slug:"lessons_from_umg",title:"Lessons from 3 years of UMG",tags:["design","coding"]},o=void 0,l={permalink:"/blog/lessons_from_umg",source:"@site/blog/2025_01_08_lessons_from_umg.md",title:"Lessons from 3 years of UMG",description:"Bunch of lessons that I learned after 3 years of working on UMG-engine.",date:"2025-01-09T02:30:59.000Z",formattedDate:"January 9, 2025",tags:[{label:"design",permalink:"/blog/tags/design"},{label:"coding",permalink:"/blog/tags/coding"}],readingTime:4.66,hasTruncateMarker:!0,authors:[],frontMatter:{slug:"lessons_from_umg",title:"Lessons from 3 years of UMG",tags:["design","coding"]},nextItem:{title:"A New UMG",permalink:"/blog/a_new_umg"}},s={authorsImageUrls:[]},p=[{value:"Pragmatism over Dogmatism.",id:"pragmatism-over-dogmatism",level:2},{value:"Simplicity is paramount",id:"simplicity-is-paramount",level:2},{value:"Avoid premature abstraction/generalization",id:"avoid-premature-abstractiongeneralization",level:2},{value:"Coupling vs Abstraction",id:"coupling-vs-abstraction",level:2},{value:"Explicit &gt; Implicit",id:"explicit--implicit",level:2},{value:"Little helper functions",id:"little-helper-functions",level:2},{value:"Big files",id:"big-files",level:2},{value:"Prefer breadth, not depth",id:"prefer-breadth-not-depth",level:2},{value:"Depth:",id:"depth",level:3},{value:"Or Breadth:",id:"or-breadth",level:3},{value:"SSOTs are great (But beware of SSOT/coupling tradeoff)",id:"ssots-are-great-but-beware-of-ssotcoupling-tradeoff",level:2},{value:"Robust/defensive code is good",id:"robustdefensive-code-is-good",level:2}],u={toc:p},m="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Bunch of lessons that I learned after 3 years of working on UMG-engine."),(0,r.kt)("h1",{id:"throughout-this-post-i-will-list-a-bunch-of-the-core-lessons-i-have-learned-from-3-years-of-working-on-umg-condensed-into-1-file"},'Throughout this post, I will list a bunch of the core "lessons" I have learned from 3 years of working on UMG, condensed into 1 file.'),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"pragmatism-over-dogmatism"},"Pragmatism over Dogmatism."),(0,r.kt)("p",null,"Favor practicality/pragmatism over ideology/dogmatism.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"^^^ Possibly the most important programming lesson I have ever learned.")," "),(0,r.kt)("p",null,"This sounds obvious, but it took far me too long to learn."),(0,r.kt)("p",null,"Sometimes, dogmatism can be useful, since our brain can ignore entire classes of ideas/solutions without analyzing them. (Ideas that don't align with our ideology.) This ignorance allows our brain to focus on more important stuff, which can be helpful.  "),(0,r.kt)("p",null,"In engineering though, being blind is not a good thing.",(0,r.kt)("br",{parentName:"p"}),"\n","It's easy to be dogmatic, less easy to be pragmatic.  "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"To sum it up: Instead of being dogmatic, be pragmatic."),(0,r.kt)("br",{parentName:"p"}),"\n","Be open to new ideas! Execution is everything."),(0,r.kt)("hr",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"simplicity-is-paramount"},"Simplicity is paramount"),(0,r.kt)("p",null,"Simplicity is hard.",(0,r.kt)("br",{parentName:"p"}),"\n","Solving something complex while having everything look simple is a monumental task.",(0,r.kt)("br",{parentName:"p"}),"\n","It is very, very easy to just throw a bunch of code together and make a mess doing something.",(0,r.kt)("br",{parentName:"p"}),"\n","Be disciplined! Do NOT give in to the temptation of easy complexity. "),(0,r.kt)("hr",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"avoid-premature-abstractiongeneralization"},"Avoid premature abstraction/generalization"),(0,r.kt)("p",null,"Don't overfocus on making your components and systems as generic as possible.",(0,r.kt)("br",{parentName:"p"}),"\n","Instead, make them useful for the current problem.",(0,r.kt)("br",{parentName:"p"}),"\n","The more generic or abstract something is, the harder it is to work with.  "),(0,r.kt)("p",null,'The faster you can get "strong rules" down for your systems, the easier development will be.  '),(0,r.kt)("p",null,"Basically, we want to avoid making things overly generic;",(0,r.kt)("br",{parentName:"p"}),"\n","Instead, we should make HARD, SIMPLE assumptions about stuff. (Perfect example of this is minecraft, with its voxel-like setup)",(0,r.kt)("br",{parentName:"p"}),"\n","If the assumption is strong and fits our use case, the systems will end up being more powerful and simpler anyway."),(0,r.kt)("p",null,"It's honestly OKAY if we don't hit all use-cases."),(0,r.kt)("p",null,"Likewise, avoid blindly following DRY principle. (See the ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself#AHA"},"AHA principle")," as a counterexample)"),(0,r.kt)("hr",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"coupling-vs-abstraction"},"Coupling vs Abstraction"),(0,r.kt)("p",null,"When writing code, try to be aware of all the coupling that you introduce.",(0,r.kt)("br",{parentName:"p"}),"\n","Coupling is invisible when writing code, but very much visible when refactoring."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=rQlMtztiAoA&ab_channel=CodeAesthetic"},"This video explains it nicely.")),(0,r.kt)("p",null,"If functions are the same, but have different reasons to change, they do not belong under the same abstraction."),(0,r.kt)("p",null,"Copy-pasting code is not always bad!!"),(0,r.kt)("hr",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"explicit--implicit"},"Explicit > Implicit"),(0,r.kt)("p",null,"The engine shouldn't do stuff under the hood.",(0,r.kt)("br",{parentName:"p"}),"\n","In legacy-umg, we synced entities automatically.",(0,r.kt)("br",{parentName:"p"}),"\n","We buffered entities to the ECS automatically.",(0,r.kt)("br",{parentName:"p"}),"\n","We added entities to groups automatically after creation.   "),(0,r.kt)("p",null,'Implicit code is bad, because it can restrict what the programmers can do,\nand it makes it so some code ends up being written as a "hack" around the implicit systems that exist.'),(0,r.kt)("p",null,"It's also makes the system harder to reason about as a whole."),(0,r.kt)("p",null,"Next time, make stuff explicit please."),(0,r.kt)("hr",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"little-helper-functions"},"Little helper functions"),(0,r.kt)("p",null,"If you find yourself copy-pasting similar code a bunch, just make a little helper function to automate it.  "),(0,r.kt)("p",null,"Don't be tempted to make a big, overreaching abstraction at a higher level. Just make a cute lil helper instead."),(0,r.kt)("p",null,"Also, don't be afraid to just copy-paste the helper function to the top of whatever file you are using it in!",(0,r.kt)("br",{parentName:"p"}),"\n","(The perfect example here is item-definitions for lootplot; where little-helper functions are super useful)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"If the helper-func's purpose is well-defined, and simple:  \nMaybe best to share it between files\n\nIf the helper-func's purpose is ill-defined, or may change:  \nMaybe best to copy paste it to the top of the file?\n(Reduces coupling; avoids potential refactors)\n")),(0,r.kt)("p",null,"Either way, dont be dogmatic, be pragmatic."),(0,r.kt)("hr",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"big-files"},"Big files"),(0,r.kt)("p",null,"Don't be afraid of big files (ie files that are over 1000 lines long.)",(0,r.kt)("br",{parentName:"p"}),"\n",'Never split up a big file just because "it\'s big".',(0,r.kt)("br",{parentName:"p"}),"\n","It should only be split up if it makes logical sense.  "),(0,r.kt)("p",null,"(Perfect example of this is ",(0,r.kt)("inlineCode",{parentName:"p"},"lootplot/shared/exports.lua"),"; it's really nice having all of the exports in one place.)",(0,r.kt)("br",{parentName:"p"}),"\n","(Another example is ",(0,r.kt)("inlineCode",{parentName:"p"},"s0.content/../foods.lua"),", containing all the food-item definitions. It's nice to define all the foods in the same place)"),(0,r.kt)("p",null,"This applies especially to big files that are broad; not deep. (see below)"),(0,r.kt)("hr",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"prefer-breadth-not-depth"},"Prefer breadth, not depth"),(0,r.kt)("p",null,"What's better?"),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"depth"},"Depth:"),(0,r.kt)("mermaid",{value:"stateDiagram\n    Code_A --\x3e Code_B\n    Code_B --\x3e Code_C"}),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"or-breadth"},"Or Breadth:"),(0,r.kt)("mermaid",{value:"stateDiagram\n    Code_A\n    Code_B\n    Code_C\n    Code_D\n    Code_E"}),(0,r.kt)("hr",null),(0,r.kt)("p",null,"I hold that that breadth is generally always better.  "),(0,r.kt)("p",null,"It's simpler.",(0,r.kt)("br",{parentName:"p"}),"\n","Each part is easier to understand.",(0,r.kt)("br",{parentName:"p"}),"\n","There is less coupling (ie: easier to refactor)",(0,r.kt)("br",{parentName:"p"}),"\n","It's also a lot easier to test!"),(0,r.kt)("hr",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"ssots-are-great-but-beware-of-ssotcoupling-tradeoff"},"SSOTs are great (But beware of SSOT/coupling tradeoff)"),(0,r.kt)("p",null,"If we have data as a SSOT, there is less opportunity for bugs.",(0,r.kt)("br",{parentName:"p"}),"\n","There are less moving parts, and the system is more robust."),(0,r.kt)("p",null,"One downside:",(0,r.kt)("br",{parentName:"p"}),"\n","Having a SSOT ",(0,r.kt)("em",{parentName:"p"},"does")," introduce coupling, since the parts must be connected."),(0,r.kt)("p",null,"So just be wary of this. Be pragmatic."),(0,r.kt)("hr",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"robustdefensive-code-is-good"},"Robust/defensive code is good"),(0,r.kt)("p",null,"Being overly defensive is better than being overly aggressive."),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"onItemUsed(function(playerEnt, itemEnt)\n    -- items always have a `mana` cost, \n    -- since we are making a game with wizards!\n    playerEnt.mana -= itemEnt.manaCost\nend\n")),(0,r.kt)("p",null,"^^^ BAD!! This is terrible!!!",(0,r.kt)("br",{parentName:"p"}),"\n","What happens if we add an item that doesn't use mana? (EG a gun???)",(0,r.kt)("br",{parentName:"p"}),"\n","Also, what happens if the player doesn't have mana???",(0,r.kt)("br",{parentName:"p"}),"\n","(SPOILER: game crashes)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"onItemUsed(function(playerEnt, itemEnt)\n    if itemEnt.manaCost and playerEnt.mana then\n        -- avoids crash by checking defensively\n        playerEnt.mana -= itemEnt.manaCost\n    end\nend\n")),(0,r.kt)("p",null,"^^^ this code is much more robust, and much more defensive."))}c.isMDXComponent=!0}}]);