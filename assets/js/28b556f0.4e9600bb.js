"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[58],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),u=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(o.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(n),d=r,k=c["".concat(o,".").concat(d)]||c[d]||m[d]||i;return n?a.createElement(k,l(l({ref:t},p),{},{components:n})):a.createElement(k,l({ref:t},p))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[c]="string"==typeof e?e:r,l[1]=s;for(var u=2;u<i;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1559:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:1},l="Overview",s={unversionedId:"Getting-started/overview",id:"Getting-started/overview",title:"Overview",description:"This overview is meant to be as concise as possible.",source:"@site/docs/Getting-started/overview.md",sourceDirName:"Getting-started",slug:"/Getting-started/overview",permalink:"/docs/Getting-started/overview",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"UMG Modding Basics",permalink:"/docs/intro"},next:{title:"API Cheatsheet",permalink:"/docs/Getting-started/cheatsheet"}},o={},u=[{value:"Mod folder structure:",id:"mod-folder-structure",level:2},{value:"<strong>Entities</strong>",id:"entities",level:2},{value:"Groups",id:"groups",level:2},{value:"Buses",id:"buses",level:2},{value:"Client-Server communication",id:"client-server-communication",level:2}],p={toc:u},c="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(c,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"overview"},"Overview"),(0,r.kt)("p",null,"This overview is meant to be as concise as possible.",(0,r.kt)("br",null),"\nI'm not going to waste your time.",(0,r.kt)("br",null)),(0,r.kt)("p",null,"You must be a programmer with ",(0,r.kt)("a",{parentName:"p",href:"https://learnxinyminutes.com/docs/lua/"},"some experience in lua")," to understand this.",(0,r.kt)("br",{parentName:"p"}),"\n","Also, experience in ",(0,r.kt)("a",{parentName:"p",href:"https://love2d.org"},"love2d")," helps."),(0,r.kt)("h1",{id:"table-of-contents"},"Table of Contents:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Basics:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mod-folder-structure"},"Folder structure")))),(0,r.kt)("li",{parentName:"ul"},"ECS Architecture:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#entities"},"Entities")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#groups"},"Groups")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#buses"},"Buses")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#client-server-communication"},"Client-server communication")))),(0,r.kt)("li",{parentName:"ul"},"Cheatsheet:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#general-api-reference"},"General API reference"))))),(0,r.kt)("h2",{id:"mod-folder-structure"},"Mod folder structure:"),(0,r.kt)("p",null,"Each mod has a folder structure as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"\nassets/\n    sounds/ -- sounds and images go here.\n    images/ -- they are automatically loaded on clientside.\n-- images are automatically put in the texture atlas (graphics.atlas) for auto-batching.\n\nserver/\n    file1.lua -- these files are automatically loaded\n    blah.lua  -- on serverside\n\nclient/\n    cl_file.lua -- these files are auto-loaded on clientside.\n    nested/\n        abc.lua -- nested directories work fine. `abc.lua` is loaded.\n\nshared/\n    -- these files are auto-loaded on BOTH serverside and clientside\n    shared_file.lua \n\n-- entities are defined here.\n-- entities are loaded on both client and server.\nentities/  \n    ball.lua -- ball entity definition file\n    player.lua\n    enemy.lua\n\nmod_config.json  -- config file\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"All Files and folders starting with ",(0,r.kt)("inlineCode",{parentName:"strong"},"_")," are ignored."))),(0,r.kt)("hr",null),(0,r.kt)("h1",{id:"ecs-architecture"},"ECS Architecture:"),(0,r.kt)("p",null,"This project uses something that resembles an Entity Component System.",(0,r.kt)("br",null),"\n(Almost) Everything in the world is just an entity."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"entities"},(0,r.kt)("a",{parentName:"h2",href:"../entities"},(0,r.kt)("strong",{parentName:"a"},"Entities"))),(0,r.kt)("p",null,"An entity is just a glorified lua table, pretty much.",(0,r.kt)("br",null),'\nThey contain "components", which are just key-values in the table.'),(0,r.kt)("p",null,"We can give entitys components:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"ent.myComponent = {}\nent.other = 2 -- can be any lua type.\n")),(0,r.kt)("p",null,"And we access components normally too:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"print(ent.other)\n")),(0,r.kt)("p",null,"To define an entity type, we create a new file in ",(0,r.kt)("inlineCode",{parentName:"p"},"entities/")," folder."),(0,r.kt)("p",null,"To create an entity, we use ",(0,r.kt)("inlineCode",{parentName:"p"},"server.entities"),".",(0,r.kt)("br",null),"\nexample:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"local ent = server.entities.my_entity()\n")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"../entities"},"Read a more in-depth explanation here.")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"groups"},"Groups"),(0,r.kt)("p",null,"Groups are what contain entities.",(0,r.kt)("br",null)),(0,r.kt)("p",null,"If you are starting out, you likely won't need to use these.",(0,r.kt)("br",null),"\n",(0,r.kt)("a",{parentName:"p",href:"../groups"},"Read more about them here.")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"buses"},"Buses"),(0,r.kt)("p",null,"Event buses and Question buses are the ",(0,r.kt)("em",{parentName:"p"},"heart")," of UMG.",(0,r.kt)("br",null),"\nWithout them, UMG would be worthless."),(0,r.kt)("p",null,"Event buses: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Dispatch events with ",(0,r.kt)("inlineCode",{parentName:"li"},"umg.call")),(0,r.kt)("li",{parentName:"ul"},"When we dispatch information, we don't care who responds"),(0,r.kt)("li",{parentName:"ul"},"Respond to events with ",(0,r.kt)("inlineCode",{parentName:"li"},"umg.on")),(0,r.kt)("li",{parentName:"ul"},"(Similar to pub-sub design pattern)")),(0,r.kt)("p",null,"Question buses: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Request information with ",(0,r.kt)("inlineCode",{parentName:"li"},"umg.ask")),(0,r.kt)("li",{parentName:"ul"},"When we gather information, we don't care who gives it"),(0,r.kt)("li",{parentName:"ul"},"Provide information with ",(0,r.kt)("inlineCode",{parentName:"li"},"umg.answer")),(0,r.kt)("li",{parentName:"ul"},"(Similar to pub-sub design pattern, but in reverse)")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"../buses"},"Read more about them here."))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"client-server-communication"},"Client-Server communication"),(0,r.kt)("p",null,"In UMG, there isn't automatic syncing; lots has to be done by mods."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"What IS synced:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"creation of entities, (and their component values directly upon creation)"),(0,r.kt)("li",{parentName:"ul"},"deletion of entities"),(0,r.kt)("li",{parentName:"ul"},"joining / leaving of players")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"What ISN'T synced:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"entity component values"),(0,r.kt)("li",{parentName:"ul"},"local events")),(0,r.kt)("p",null,"It's important to note, though, that a lot of syncing is done by base mods.\nFor example, the ",(0,r.kt)("inlineCode",{parentName:"p"},"inventory")," mod automatically syncs entity inventories.",(0,r.kt)("br",null),"\nLikewise, the ",(0,r.kt)("inlineCode",{parentName:"p"},"xy")," mod will automatically sync entity positions/velocities"),(0,r.kt)("p",null,"Client-server communication also uses callbacks:"),(0,r.kt)("p",null,"Server side:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},'-- broadcasts `message1` to all clients.\n-- you can send any lua data you want, even tables!\nserver.broadcast("message1",   ent, 2, 3, "blah data")\n-- entities are sent over by id, efficiently.\n\n\n-- Same as broadcast, but it only sends to the client called `playerUsername`.\nserver.unicast(playerUsername, "message1",   1.0545, 2.9, -5, "data :)")\n\n\n-- listens to `moveTo` messages sent by clients\nserver.on("moveTo", {\n    arguments = {checkString}, -- add typecheckers here.\n    handler = function(sender_username, msg, ...) \n        print("message from", sender_username)\n        print("data:", msg, ...)\n    end\n})\n\n')),(0,r.kt)("p",null,"Client side:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},'-- send a message to the server.  \n-- (same as server.broadcast, but clientside)\nclient.send("moveTo", x, y) \n\n\n-- listens to `message1` from the server\nclient.on("message1", function(x, y, z, blah)\n    print("received message1 from server:  ", x, y, z, blah)\nend)\n\n')),(0,r.kt)("p",null,"Any data can be sent across the network, except for functions and userdata.\nIf a table is sent across, all nested tables will be serialized and sent across.\nIf an entity is sent across, it will be efficiently serialized by id.\nSending tables across is the most expensive. Try to only send numbers, strings, and entities across the network for best performance."),(0,r.kt)("p",null,"If you need to send a metatable across, take a look at the ",(0,r.kt)("inlineCode",{parentName:"p"},"register")," function.\n(Remember; functions can't be serialized!)"))}m.isMDXComponent=!0}}]);